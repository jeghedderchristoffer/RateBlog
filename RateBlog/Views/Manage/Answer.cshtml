@model FeedbackResponseViewModel
@inject RateBlog.Services.IFeedbackService FeedbackService
@inject UserManager<ApplicationUser> UserManager
@{
    ViewData["Title"] = "Feedback";
}

<div class="navbar-allaround"></div>

@Html.Partial("_NavbarAddonPartial")
<div class="bottom-container" style="background: #fafafa">
    <div style="background: #fff !important">
        <div class="navbar-addon" style="padding-bottom: 20px; border: none; background:#fff">
            <div class="container">
                <div class="col-md-12 col-xs-12 noPadding">
                    <div class="col-md-2 col-xs-2 noPadding addon-box">
                        <div class="addon-img-container">
                            <a asp-controller="Account" asp-action="Profile" asp-route-id="@Model.Rating.ApplicationUserId">
                                <img src="@Url.Action("UsersProfilePic", "Manage", new { id = Model.Rating.ApplicationUserId })" />
                            </a>
                        </div>
                    </div>
                    <div class="col-md-5 col-xs-9 addon-box">
                        <div class="addon-number" style="text-align: left">
                            <p>Du har fået feedback af</p>
                            <h3>@UserManager.Users.Single(x => x.Id == Model.Rating.ApplicationUserId).Name</h3>
                        </div>


                    </div>
                    <div class="col-md-5 col-xs-12 addon-box">
                        <div class="addon-number">
                            <div class="se-anmeldelse-center se-anmeldelse-padding">
                                <h2 class="text-center">Samlet score</h2>
                                <br />
                                <div class="show-rating-box-se">
                                    <div class="show-rating-se">
                                        <div class="show-rating-front-se">
                                            @for (int i = 0; i < FeedbackService.GetSingleFeedbackScoreAverage(Model.Rating.Id); i++)
                                            {
                                                <i class="fa fa-star" aria-hidden="true"></i>
                                            }
                                        </div>
                                        <div class="show-rating-back-se">
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>


                    </div>
                </div>
            </div>
        </div>

        <div style="border-bottom: 1px solid #ddd ">
            <div class="container" style="padding-top: 30px; padding-bottom: 30px;">
                <div class="col-md-12">
                    @if (!string.IsNullOrEmpty(Model.Rating.FeedbackGood) && !string.IsNullOrEmpty(Model.Rating.FeedbackBetter))
                    {
                        <div class="col-md-6 se-anmeldelse-padding">
                            <h4><i>Følgeren synes godt om følgende:</i></h4>
                            <br />
                            <p style="line-height: 180%">@Model.Rating.FeedbackGood</p>
                        </div>
                        <div class="col-md-offset-1 col-md-5 se-anmeldelse-padding">
                            <h4><i>Følgeren synes du kan forbedre følgende:</i></h4>
                            <br />
                            <p style="line-height: 180%">@Model.Rating.FeedbackBetter</p>
                        </div>
                    }
                    else if (!string.IsNullOrEmpty(Model.Rating.FeedbackBetter))
                    {
                        <div class="col-md-6 se-anmeldelse-padding">
                            <h4><i>Følgeren synes du kan forbedre følgende:</i></h4>
                            <br />
                            <p style="line-height: 180%">@Model.Rating.FeedbackBetter</p>
                        </div>
                    }
                    else if (!string.IsNullOrEmpty(Model.Rating.FeedbackGood))
                    {
                        <div class="col-md-6 se-anmeldelse-padding">
                            <h4><i>Følgeren synes godt om følgende:</i></h4>
                            <br />
                            <p style="line-height: 180%">@Model.Rating.FeedbackGood</p>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
    <div class="container noPadding" style="padding-top: 30px;">
        <div class="col-md-12 noPadding">
            <div class="col-md-offset-3 col-md-6">
                <form asp-area="" asp-controller="Manage" asp-action="AnswerFeedback">
                    <h4 class="text-center">Besvar din feedback</h4>
                    @Html.HiddenFor(x => x.Rating.Id)
                    <textarea asp-for="@Model.Rating.Answer" class="rating-input" style="margin-bottom: 15px" rows="8" placeholder="Hvad tænker du om den feedback du har modtaget?"></textarea>
                    <input type="submit" style="margin-bottom: 20px; background-color: #089de3 !important" class="edit-button" value="Send" />
                </form>
            </div>
        </div>
    </div>
</div>

