@model RateBlog.Models.EkspertViewModels.IndexViewModel
@inject UserManager<ApplicationUser> UserManager
@inject RateBlog.Repository.IInfluenterRepository InfluenterReposritory
@inject RateBlog.Repository.IKategoriRepository CategoryRepository
@inject RateBlog.Repository.IPlatformRepository PlatformRepository



@{
    ViewData["Title"] = "Søg på influenter";
    var user = await UserManager.GetUserAsync(User);
}

<div style="height: 100%; margin-bottom:50px; background: #f5f5f5">

    <div class="navbar-allaround"></div>

    <div style="background-color: #fff; padding-bottom: 20px;">
        <div class="outer">
            <div class="middle">
                <div class="inner">
                    <h2>Søg på influencers</h2>
                    
                    <form method="get" asp-area="" asp-controller="Ekspert" asp-action="Index">
                        <input type="text" name="search" class="search-inputsøg" placeholder="Søg på en influecer du vil give en ekspert rating" />
                        <span>
                            <input class="search-button" type="submit" value="Søg" />

                        </span>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="col-md-2">

        </div>
        <div class="col-md-9 col-sm-12 noPadding" style="padding-bottom: 20px;">
            <div class="infoInfluenter">
                <h2 style="margin-top: 10px; margin-bottom: 20px;">Resultater for @Model.SearchString</h2>


                @if (Model.InfluentList != null)
                {
                    @foreach (var influ in Model.InfluentList)
                    {

                        <div class="col-md-12 search-result noPaddingLeft">
                            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12 search-result-box">
                                <a asp-controller="Influencer" asp-action="Show" asp-route-id="@influ.InfluenterId">
                                    <img class="influ-img" src="@Url.Action("UsersProfilePic", "Manage", new { id = influ.Id })" />
                                </a>

                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 noPadding" style="">

                                <h4>@InfluenterReposritory.Get(influ.InfluenterId.Value).Alias</h4>
                                <p style="margin-top: 15px;">
                                    @if (CategoryRepository.GetInfluentersCategories(influ.InfluenterId.Value) != null)
                                    {
                                    <p style="margin-top: 15px;">
                                        @foreach (var kategori in CategoryRepository.GetInfluentersCategories(influ.InfluenterId.Value))
                                        {
                                            @if (kategori.Equals(CategoryRepository.GetInfluentersCategories(influ.InfluenterId.Value).Last()))
                                            {
                                                @kategori
                                            }
                                            else
                                            {
                                                @kategori <span>|</span>
                                            }
                                        }
                                    </p>
                                    }
                                    else
                                    {
                                        <p>Ukendte kategorier</p>
                                    }


                                    <div class="a-center">
                                        @if (PlatformRepository.GetAllInfluenterPlatformForInfluenter(influ.InfluenterId.Value) != null)
                                        {
                                            @foreach (var platform in PlatformRepository.GetAllInfluenterPlatformForInfluenter(influ.InfluenterId.Value))
                                            {
                                                @if (PlatformRepository.Get(platform.PlatformId).PlatformNavn == "Facebook")
                                                {
                                                    <a href="http://www.facebook.com/@platform.Link" target="_blank" class="fa fa-search-o fa-facebook fa-facebook-search"></a>
                                                }
                                                else if (PlatformRepository.Get(platform.PlatformId).PlatformNavn == "YouTube")
                                                {
                                                    <a href="http://www.youtube.com/user/@platform.Link" target="_blank" class="fa fa-search-o fa-youtube fa-youtube-search"></a>
                                                }
                                                else if (PlatformRepository.Get(platform.PlatformId).PlatformNavn == "SnapChat")
                                                {
                                                    <a href="http://www.snapchat.com/add/@platform.Link" target="_blank" class="fa fa-search-o fa-snapchat-ghost fa-snapchat-ghost-search"></a>
                                                }
                                                else if (PlatformRepository.Get(platform.PlatformId).PlatformNavn == "Instagram")
                                                {
                                                    <a href="http://www.instagram.com/@platform.Link" target="_blank" class="fa fa-search-o fa-instagram fa-instagram-search"></a>
                                                }
                                                else if (PlatformRepository.Get(platform.PlatformId).PlatformNavn == "Twitter")
                                                {
                                                    <a href="http://www.twitter.com/@platform.Link" target="_blank" class="fa fa-search-o fa-twitter fa-twitter-search"></a>
                                                }
                                                else if (PlatformRepository.Get(platform.PlatformId).PlatformNavn == "Twitch")
                                                {
                                                    <a href="http://www.twitch.tv/@platform.Link" target="_blank" class="fa fa-search-o fa-twitch fa-twitch-search"></a>
                                                }
                                                else if (PlatformRepository.Get(platform.PlatformId).PlatformNavn == "Website")
                                                {
                                                    <a href="http://@platform.Link" target="_blank" class="fa fa-search-o fa-globe fa-globe-search"></a>
                                                }
                                            }
                                        }
                                        else
                                        {
                                            <p style="margin-top: 15px">Ingen sociale medier</p>

                                        }


                                    </div>

                                </div>
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12 noPadding">
                                    
                                    <a asp-controller="Ekspert" asp-action="EkspertRating" asp-route-id="@influ.InfluenterId" class="a-button" style="background-color: #08468d; margin-top: 40px;">Anmeld</a>
                                    <a asp-controller="Influencer" asp-action="Read" asp-route-id="@influ.InfluenterId" class="a-button" style="margin-bottom:15px;">Se anmeldelser</a>

                                </div>
                            </div>
                    }   
                }
            </div>
        </div>

    </div>

</div>







