@using Microsoft.AspNetCore.Identity
@using Bestfluence.Models

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@inject Bestfluence.Services.Interfaces.IInfluencerService InfluencerService

@if (SignInManager.IsSignedIn(User))
{
    var user = await UserManager.GetUserAsync(User);
    var isInfluencer = (InfluencerService.IsInfluencer(user.Id)) ? "Influencer" : "Bliv influencer";

    <input type="hidden" value="@user.Id" id="applicationUserId" />
    <form asp-area="" asp-controller="Account" asp-action="Logout" method="post" id="logoutForm" class="navbar-right">
        <ul class="nav navbar-nav navbar-right" id="dropdownPc">

            @if (isInfluencer == "Influencer" && await UserManager.IsInRoleAsync(user, "Influencer"))
            {
                <li>
                    <a asp-controller="Votes" asp-action="Index" class="navLinks">Afstemninger</a>
                </li>
            }

            <li>
                <a asp-area="" asp-controller="Manage" asp-action="Feedback" class="navLinks">
                    Min feedback
                    <span class="badge navbarBagde" style="font-family: Arial; background: #FFA500"></span>
                </a>
            </li>

            <li class="drop">
                <a href="#" class="navLinks">Konto</a>
                <div class="dropdownContain">
                    <div class="dropOut">
                        <div class="triangle"></div>
                        <ul>
                            <li><a asp-area="" asp-controller="Manage" asp-action="Profile" class="dropOut-a">Vis profil</a></li>
                            <li><a asp-area="" asp-controller="Manage" asp-action="Edit" class="dropOut-a">Rediger profil</a></li>
                            <li><a asp-area="" asp-controller="Manage" asp-action="Influencer" class="dropOut-a">@isInfluencer</a></li>
                            <li><a asp-area="" asp-controller="Manage" asp-action="Notifications" class="dropOut-a">Indstillinger</a></li>
                            <li><a id="logOut" href="#" class="dropOut-a">Log af</a></li>
                        </ul>
                    </div>
                </div>
            </li>
        </ul>
        <ul class="nav navbar-nav navbar-right" id="dropdownMobile" style="display: none">

            @if (isInfluencer == "Influencer" && await UserManager.IsInRoleAsync(user, "Influencer"))
            {
                <li>
                    <a asp-controller="Votes" asp-action="Index" class="navLinks">Afstemninger</a>
                </li>
            }

            <li>
                <a asp-area="" asp-controller="Manage" asp-action="Feedback">
                    Min feedback
                    <span class="badge navbarBagde" style="font-family: Arial; background: #FFA500"></span>
                </a>
            </li>

            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">Konto <span class="caret"></span></a>
                <ul class="dropdown-menu">
                    <li><a asp-area="" asp-controller="Manage" asp-action="Profile" style="padding: 0 0 0 25px; line-height: 50px">Vis profil</a></li>
                    <li><a asp-area="" asp-controller="Manage" asp-action="Edit" style="padding: 0 0 0 25px; line-height: 50px">Rediger profil</a></li>
                    <li><a asp-area="" asp-controller="Manage" asp-action="Influencer" style="padding: 0 0 0 25px; line-height: 50px">@isInfluencer</a></li>
                    <li><a asp-area="" asp-controller="Manage" asp-action="Notifications" style="padding: 0 0 0 25px; line-height: 50px">Indstillinger</a></li>
                    <li><a id="logOutMobile" href="#" style="padding: 0 0 0 25px; line-height: 50px">Log af</a></li>
                </ul>
            </li>
            

           
            
        </ul>
    </form>
}
else
{
    <ul class="nav navbar-nav navbar-right">
        <li><a id="signup" class="login-links navLinks" data-toggle="modal" data-target="#opretModal">Opret</a></li>
        <li><a class="login-links navLinks" data-toggle="modal" data-target="#loginModal">Log ind</a></li>
    </ul>
}

